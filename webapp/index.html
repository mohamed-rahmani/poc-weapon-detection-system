<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weapon Detection - Interface Web</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üõ°Ô∏è Weapon Detection System</h1>
        <p>D√©tection d'armes en temps r√©el avec IA</p>
      </header>

      <div class="main-content">
        <!-- Section Upload Image -->
        <section class="card">
          <h2>üì∑ D√©tection par Image</h2>
          <div class="upload-section">
            <input type="file" id="imageInput" accept="image/*" hidden />
            <button id="uploadBtn" class="btn btn-primary">
              Choisir une image
            </button>
            <div class="threshold-control">
              <label for="imageThreshold"
                >Seuil de confiance:
                <span id="imageThresholdValue">0.5</span></label
              >
              <input
                type="range"
                id="imageThreshold"
                min="0"
                max="1"
                step="0.05"
                value="0.5"
              />
            </div>
          </div>
          <div id="imagePreview" class="preview-container hidden">
            <img id="previewImage" alt="Preview" />
            <button id="detectImageBtn" class="btn btn-success">
              D√©tecter les armes
            </button>
          </div>
          <div id="imageResults" class="results hidden"></div>
        </section>

        <!-- Section Webcam -->
        <section class="card">
          <h2>üìπ D√©tection Webcam en Temps R√©el</h2>
          <div class="webcam-controls">
            <button id="startWebcamBtn" class="btn btn-primary">
              D√©marrer la Webcam
            </button>
            <button id="stopWebcamBtn" class="btn btn-danger hidden">
              Arr√™ter la Webcam
            </button>
            <div class="threshold-control">
              <label for="webcamThreshold"
                >Seuil de confiance:
                <span id="webcamThresholdValue">0.5</span></label
              >
              <input
                type="range"
                id="webcamThreshold"
                min="0"
                max="1"
                step="0.05"
                value="0.5"
              />
            </div>
            <div class="detection-toggle">
              <label>
                <input type="checkbox" id="autoDetect" checked />
                D√©tection automatique
              </label>
            </div>
          </div>
          <div id="webcamContainer" class="webcam-container hidden">
            <video id="webcamVideo" autoplay playsinline></video>
            <canvas id="detectionCanvas"></canvas>
          </div>
          <div id="webcamResults" class="results hidden"></div>
        </section>

        <!-- Section Statistiques -->
        <section class="card stats-card">
          <h2>üìä Statistiques de session</h2>
          <div class="stats-grid">
            <div class="stat-item">
              <span class="stat-label">Analyses effectu√©es:</span>
              <span class="stat-value" id="totalDetections">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Armes d√©tect√©es:</span>
              <span class="stat-value" id="weaponsDetected">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Derni√®re d√©tection:</span>
              <span class="stat-value" id="lastDetection">-</span>
            </div>
          </div>
          <div
            style="
              margin-top: 15px;
              padding: 12px;
              background: rgba(0, 0, 0, 0.2);
              border-radius: 8px;
            "
          >
            <p
              style="color: var(--text-secondary); font-size: 0.9rem; margin: 0"
            >
              ‚ÑπÔ∏è <strong>Analyses effectu√©es:</strong> Nombre total d'objets
              d√©tect√©s dans toutes les analyses<br />
              ‚ö†Ô∏è <strong>Armes d√©tect√©es:</strong> Compteur cumul√© d'armes
              trouv√©es (toutes classes confondues)
            </p>
          </div>
        </section>
      </div>

      <!-- Loading Overlay -->
      <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>D√©tection en cours...</p>
      </div>

      <!-- Toast Notifications -->
      <div id="toastContainer" class="toast-container"></div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
